/* ===== base full-screen canvas (auto added) ===== */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
  touch-action: none;
}
#game {
  position: fixed;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  image-rendering: pixelated;
}
#ui-root {
  z-index: 999998;
  position: fixed;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none; /* UI 시스템이 내부 버튼에만 켤 수 있게 */
}
/* ===== /base full-screen canvas ===== */

/* ==== extracted style block 0 ==== */
html{background:#000;}

    :root{
      --uiScale: 1.2;
      --uiH: clamp(calc(84px * var(--uiScale)),  calc(16vh * var(--uiScale)),  calc(120px * var(--uiScale)));
      --pad: clamp(calc(66px * var(--uiScale)),  calc(12.5vw * var(--uiScale)), calc(90px  * var(--uiScale)));
      --stick:clamp(calc(28px * var(--uiScale)),  calc(5.6vw * var(--uiScale)),  calc(40px  * var(--uiScale)));
      --btn: clamp(calc(70px * var(--uiScale)),  calc(13vw * var(--uiScale)),   calc(90px  * var(--uiScale)));
    
  --safeTop: env(safe-area-inset-top, 0px);
}


    body{ margin:0; background:black; overflow:hidden; touch-action:none; }
    #game{ position:fixed; top:0; left:0; image-rendering:pixelated; }

    /* ============================= */
    /* ✅ 하단 UI 바 */
    /* ============================= */
    #ui{
      position:fixed;bottom:0;width:100%;height:var(--uiH);
      background:#111;border-top:3px solid #550000;
      display:flex;align-items:center;justify-content:space-between;
      padding:0 clamp(10px, 4vw, 25px);box-sizing:border-box;
      z-index:999999;
    }

    #movePad{
      position:relative;
      width:var(--pad);height:var(--pad);
      border-radius:50%;
      background:#222;
    }
    #stick{
      position:absolute;
      width:var(--stick);
      height:var(--stick);
      border-radius:50%;
      background:#666;
      left: calc(50% - (var(--stick) / 2));
      top:  calc(50% - (var(--stick) / 2));
    }

    /* 오른쪽 버튼 영역 */
    #rightBtns{
      position:relative;
      width:var(--btn);
      height:var(--btn);
      display:block;
      overflow:visible;
    }

    #attackBtn{
      position:absolute;
      right:0;
      bottom:0;
      width:var(--btn);height:var(--btn);
      border-radius:50%;
      background:#990000;border:3px solid #ff4444;
      display:flex;align-items:center;justify-content:center;
      font-size:26px;color:white;
      user-select:none;
      -webkit-user-select:none;
    }
    #attackBtn.active{background:red;transform:scale(.85);}

    #attackIcon{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      pointer-events:none;
    }

    /* ============================= */
    /* ✅ 아이템 선택 오버레이 UI     */
    /* ============================= */
    #lootOverlay{
position:fixed; inset:0;
  display:none;
  align-items:flex-start;
  justify-content:center;
  padding-top:calc(var(--safeTop, 0px) + 10px);
  padding-bottom:calc(var(--uiH, 0px) + var(--safeBottom, 0px) + 10px);
  z-index:999999;
  background:rgba(0,0,0,0.35);
}

    #lootPanel{
width:min(92vw, 720px);
  margin:0 auto;
  border-radius:18px;
  border:1px solid rgba(202,166,85,0.35);
  background:linear-gradient(180deg, rgba(40,24,18,0.92), rgba(12,12,12,0.94));
  box-shadow:0 10px 40px rgba(0,0,0,0.65), inset 0 0 0 1px rgba(255,255,255,0.06);
  padding:18px 16px;
  max-height:calc(100vh - var(--uiH, 0px) - var(--safeTop, 0px) - var(--safeBottom, 0px) - 20px);
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}
    #lootTitle{
      color:#fff;
      font-weight:800;
      font-size:18px;
      margin:4px 2px 10px;
      text-align:center;
    }
    .lootCards{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .lootCard{
      background:#1a1a1a;
      border:2px solid #333;
      border-radius:12px;
      padding:12px;
      color:#eee;
      line-height:1.25;
    }
    .lootCard .name{
      font-weight:900;
      margin-bottom:6px;
    }
    .lootCard .desc{
      color:#cfcfcf;
      font-size:14px;
    }
    .lootCard button{
      margin-top:10px;
      width:100%;
      padding:10px 12px;
      border:0;
      border-radius:10px;
      background:#2d6cff;
      color:#fff;
      font-weight:800;
      font-size:15px;
    }
    .lootCard.normal{
      border-color:#3a3a3a;
      box-shadow:0 0 8px rgba(255,255,255,0.1);
    }
    .lootCard.magic{
      border-color:#2f7bff;
      box-shadow:0 0 14px rgba(0,140,255,0.6);
    }
    .lootCard.rare{
      border-color:#ffd166;
      box-shadow:0 0 16px rgba(255,209,102,0.55);
    }
    .lootCard.unique{
      border-color:#ffb86b;
      box-shadow:0 0 20px rgba(255,184,107,0.70);
      animation:uniqueGlow 1.6s infinite alternate;
    }
    @keyframes uniqueGlow{
      from{ box-shadow:0 0 14px rgba(255,184,107,0.35); }
      to{ box-shadow:0 0 24px rgba(255,184,107,0.85); }
    }
    /* ✅ 아이템 정보창 HTML 렌더 */
.itemInfoWrap{
  white-space: normal;
  line-height: 1.25;
}
.itemInfoName{
  font-weight: 900;
  margin-bottom: 6px;
}
.itemInfoLine{
  white-space: pre-line; /* 줄바꿈 유지 */
  font-size: 13px;
  color: #ddd;
}
.itemInfoTier{
  opacity:0.75;
  font-size:12px;
  margin-left:6px;
}
.itemInfoDim{ color:#aaa; }
.itemInfoGap{ height:8px; }
/* ✅ POE식 아이템 이름 색상 */
.rName{ font-weight:900; }
.r-normal{ color:#ffffff; }
.r-magic{ color:#2f7bff; }
.r-rare{ color:#ffd166; }
.r-unique{ color:#ffb86b; } /* 유니크 */
    /* ============================= */
    /* ✅ 장비/가방/카오스: 분리 창 UI */
    /* ============================= */
    #hudBtns{
      position:fixed;
      top:10px; left:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      z-index:999999;
    }
    .hudBtn{
width:38px;height:38px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(20,20,20,0.86);
      color:#fff;
      font-size:18px;
      box-shadow:0 0 14px rgba(0,0,0,0.45);
      user-select:none;
      -webkit-user-select:none;
      touch-action:manipulation;
    }
    .hudBtn:active{ transform:scale(0.96); }

    /* 공통 오버레이 */
    .panelOverlay{
  position:fixed; inset:0;
  display:none;
  align-items:flex-start;
  justify-content:flex-start;
  padding-top:calc(var(--sat, 0px) + 8px);
  padding-left:8px;
  padding-right:8px;
  padding-bottom:calc(var(--uiH, 0px) + 8px);
  box-sizing:border-box;
  background:rgba(0,0,0,0.55);
  z-index:50;
}

    /* 공통 패널 */
    .panel{
width:min(96vw, 980px);
  background:linear-gradient(180deg, rgba(35,20,15,0.90), rgba(10,10,10,0.92));
  border:1px solid rgba(202,166,85,0.40);
  border-radius:18px;
  padding:14px;
  box-sizing:border-box;
  gap:10px;
  display:flex;
  flex-direction:column;
  height:auto;
  max-height:calc(100vh - var(--safeTop, 0px) - var(--safeBottom, 0px) - var(--uiH, 0px) - 14px);
  overflow:hidden;
}
    .panelTop{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:10px;
    }
    .panelClose{
      padding:8px 12px;
      border-radius:12px;
      border:1px solid #3a3a3a;
      background:#202020;
      color:#f0f0f0;
      cursor:pointer;
      font-size:13px;
    }
    .panelClose:hover{ border-color:#888; }

    /* ===== 장비/스펙 패널 ===== */
    #equipPanelBody{
      flex:1 1 auto;
      display:flex;
      gap:12px;
      min-height:0;
    }
    #equipSlots{
      flex:0 0 44%;
      background:#101010;
      border:1px solid #2b2b2b;
      border-radius:12px;
      padding:12px;
      box-sizing:border-box;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      align-content:start;
    }
    .eSlot{
      border:1px solid #444;
      border-radius:12px;
      background:#1a1a1a;
      padding:10px;
      min-height:84px;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:6px;
    }
    .eSlot .label, .eSlot .item{ display:none; }

    .eSlot:hover{ border-color:#888; }
    .eSlot.selected{ outline:2px solid #ffd166; }
    .eSlot .label{ font-size:12px; color:#aaa; text-transform:uppercase; letter-spacing:0.06em; }
    .eSlot .item{ font-size:14px; color:#f2f2f2; line-height:1.2; word-break:break-word; }
.eSlot .label{
  display:none !important;
}
   #specBox{
  margin-top:4px;   /* 또는 4px */
  flex:1 1 auto;
      background:transparent;
      border:none;
      border-radius:0;
      padding:0;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      gap:6px;
      min-height:0;
    }
    #specText{
  margin-top:8px;
  padding:12px;
  font-size:clamp(12px, 2.6vw, 14px);   /* ✅ 글씨 조금 작게 */
  line-height:1.35;
  color:#ddd;
  white-space:pre-line;                 /* ✅ 
 줄바꿈 그대로 */
  overflow-y:auto;                      /* ✅ 내용 많으면 스크롤 */
  max-height:clamp(140px, 22vh, 190px); /* ✅ 박스 안에서만 스크롤 */
  -webkit-overflow-scrolling:touch;
}
  #equipInfo{
  margin-top:4px;   /* 기존값보다 줄이기 */
  flex:0 0 auto;
      height:clamp(170px, 26vh, 260px);
      overflow:auto;
      overscroll-behavior:contain;
      -webkit-overflow-scrolling:touch;
      white-space:pre-line;
      font-size:13px;
      color:#ddd;
      background:#0f0f0f;
      border:1px solid #2b2b2b;
      border-radius:12px;
      padding:10px;
    
      width:100%;
      box-sizing:border-box;
    }

 /* ===== 가방 패널 ===== */
#bagBody{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;   /* ✅ 위-아래 배치로 고정 */
  gap:12px;
  min-height:0;
}

/* ✅ 아이템 설명: 위 */
#bagInfo{
  flex:0 0 42vh;           /* ✅ 정보창 높이 고정 */
  height:42vh;             /* ✅ 아이템에 따라 크기 변하지 않게 */
  overflow:auto;
  white-space:pre-line;
  font-size:13px;
  color:#ddd;
  background:#101010;
  border:1px solid #2b2b2b;
  border-radius:12px;
  padding:12px;
  box-sizing:border-box;
}

/* ✅ 인벤 그리드: 아래 + 스크롤 */
#bagGrid{
  flex:1 1 auto;
  overflow:auto;           /* ✅ 스크롤 */
  display:grid;
  grid-template-columns: repeat(6, 1fr);
  gap:8px;
  background:#101010;
  border:1px solid #2b2b2b;
  border-radius:12px;
  padding:10px;
  box-sizing:border-box;
  align-content:start;
  min-height:0;
}
    .bItem{
      border:1px solid #555;
      border-radius:12px;
      background:#171717;
      min-height:56px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .bItem.normal{ border-color:#666; }
    .bItem.magic{ border-color:#2f7bff; box-shadow:0 0 10px rgba(0,140,255,0.35); }
    .bItem.rare{ border-color:#ffd166; box-shadow:0 0 12px rgba(255,209,102,0.30); }
    .bItem.unique{ border-color:#ffb86b; box-shadow:0 0 14px rgba(255,184,107,0.35); }

    .bItem:hover{ border-color:#888; }
    .bItem.selected{ outline:2px solid #6bf178; }
    .bItem.unique{ border-color:#b89b00; }

  .iconCanvas{
  position:static;
  display:block;
  background:rgba(255,255,255,0.06);
  border-radius:10px;
}


    /* ===== 카오스 패널 ===== */
    #chaosBody{
      flex:1 1 auto;
      display:flex;
      gap:12px;
      min-height:0;
    }
    #chaosLeft{
      flex:1 1 auto;
      background:#101010;
      border:1px solid #2b2b2b;
      border-radius:12px;
      padding:12px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    #chaosCount{
      font-size:18px;
      font-weight:900;
      color:#fff;
    }
    #chaosBtn{
      padding:12px 14px;
      border-radius:12px;
      border:1px solid #3a3a3a;
      background:#2d6cff;
      color:#fff;
      font-weight:900;
      cursor:pointer;
    }
    #chaosBtn:active{ transform:scale(0.98); }

    #chaosInfo{
      flex:1 1 auto;
      overflow:auto;
      white-space:pre-line;
      font-size:13px;
      color:#ddd;
      background:#0f0f0f;
      border:1px solid #2b2b2b;
      border-radius:12px;
      padding:12px;
    }

    /* 모바일 */
    @media (max-width: 600px){
      #bagGrid{ grid-template-columns: repeat(4, 1fr); }
      #equipPanelBody{ flex-direction:column; }
      #equipSlots{ grid-template-columns:1fr 1fr; flex:0 0 auto; }
      #bagBody{ flex-direction:column; }
      #bagGrid{
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
}
#bagInfo{
  flex:0 0 42vh;
  height:42vh;
  overflow:auto;
}
    }
    /* ============================= */
/* ✅ DIABLO STYLE UI SKIN (ADD) */
/* ✅ <style>
html{background:#000;}
 맨 아래에 붙여넣기 */
/* ============================= */

:root{
  --d-bg0:#050505;
  --d-bg1:#0a0a0a;
  --d-bg2:#111;
  --d-panel:#0c0c0c;
  --d-panel2:#101010;
  --d-line:#2a2a2a;
  --d-line2:#3a3a3a;
  --d-gold:#b08a3a;
  --d-gold2:#d9b35a;
  --d-red:#7a0a0a;
  --d-red2:#b01010;
  --d-text:#e7e2d8;
  --d-dim:#b9b2a6;
  --d-shadow: rgba(0,0,0,0.65);
}

/* 전체 톤 다운 */
body{
  background: radial-gradient(1200px 800px at 50% 20%, #101010 0%, #050505 60%, #000 100%);
}

/* ============================= */
/* 하단 UI 바 (가죽+철 테두리)   */
/* ============================= */
#ui{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.0) 22%),
    linear-gradient(180deg, #0a0a0a, #050505 70%, #020202);
  border-top: 2px solid rgba(176,139,58,0.35);
  box-shadow:
    0 -10px 30px rgba(0,0,0,0.75),
    inset 0 1px 0 rgba(255,255,255,0.05);
}

/* ============================= */
/* 왼쪽 이동패드 (무게감)        */
/* ============================= */
#movePad{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0.25) 55%, rgba(0,0,0,0.55)),
    linear-gradient(180deg, #0f0f0f, #050505);
  border: 1px solid rgba(176,139,58,0.25);
  box-shadow:
    0 10px 22px rgba(0,0,0,0.55),
    inset 0 2px 6px rgba(255,255,255,0.05),
    inset 0 -8px 14px rgba(0,0,0,0.6);
}

#stick{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.20), rgba(255,255,255,0.06) 35%, rgba(0,0,0,0.55) 75%),
    linear-gradient(180deg, #1a1a1a, #070707);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    inset 0 2px 6px rgba(255,255,255,0.06),
    inset 0 -8px 14px rgba(0,0,0,0.7);
}

/* ============================= */
/* 오른쪽 공격 버튼 (핏빛+금속)  */
/* ============================= */
#attackBtn{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.12), rgba(0,0,0,0.0) 35%),
    radial-gradient(circle at 50% 60%, rgba(176,16,16,0.55), rgba(90,0,0,0.75) 55%, rgba(0,0,0,0.85)),
    linear-gradient(180deg, #1a0a0a, #040000);
  border: 2px solid rgba(176,139,58,0.45);
  box-shadow:
    0 14px 26px rgba(0,0,0,0.70),
    inset 0 2px 10px rgba(255,255,255,0.07),
    inset 0 -10px 18px rgba(0,0,0,0.8);
}

#attackBtn.active{
  transform: scale(.90);
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.16), rgba(0,0,0,0.0) 38%),
    radial-gradient(circle at 50% 60%, rgba(255,60,60,0.55), rgba(130,0,0,0.8) 55%, rgba(0,0,0,0.9)),
    linear-gradient(180deg, #2a0a0a, #050000);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.75),
    inset 0 2px 12px rgba(255,255,255,0.10),
    inset 0 -10px 18px rgba(0,0,0,0.85);
}

/* ============================= */
/* 상단 HUD 버튼(스펙/가방/카오스)*/
/* ============================= */
.hudBtn{
  border-radius: 14px;
  border: 1px solid rgba(176,139,58,0.22);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.0) 25%),
    linear-gradient(180deg, #0e0e0e, #050505);
  color: var(--d-text);
  box-shadow:
    0 12px 22px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -10px 16px rgba(0,0,0,0.7);
}
.hudBtn:active{
  transform: scale(0.96);
}

/* ============================= */
/* 패널 오버레이/창(무겁게)       */
/* ============================= */
.panelOverlay{
  background: rgba(0,0,0,0.72);
  backdrop-filter: blur(2px);
}

.panel{
  background:
    radial-gradient(900px 420px at 50% 0%, rgba(255,255,255,0.05), rgba(0,0,0,0.0) 55%),
    linear-gradient(180deg, #0f0f0f, #070707 70%, #040404);
  border: 1px solid rgba(176,139,58,0.28);
  box-shadow:
    0 24px 60px rgba(0,0,0,0.75),
    inset 0 1px 0 rgba(255,255,255,0.05);
}

/* 상단 버튼(닫기/장착/해제) */
.panelClose{
  border: 1px solid rgba(176,139,58,0.24);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.0) 30%),
    linear-gradient(180deg, #121212, #070707);
  color: var(--d-text);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -10px 16px rgba(0,0,0,0.65);
}
.panelClose:hover{
  border-color: rgba(217,179,90,0.45);
}

/* ============================= */
/* 슬롯/인벤 박스(디아 톤)        */
/* ============================= */
#equipSlots, #specBox, #bagGrid, #bagInfo, #chaosLeft, #chaosInfo, #specText, #equipInfo{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.0) 20%),
    linear-gradient(180deg, #0d0d0d, #070707);
  border: 1px solid rgba(176,139,58,0.15);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    inset 0 -12px 18px rgba(0,0,0,0.65);
}

/* 장비 슬롯 카드 */
.eSlot{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.05), rgba(0,0,0,0.0) 50%),
    linear-gradient(180deg, #121212, #070707);
  border: 1px solid rgba(176,139,58,0.16);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -10px 16px rgba(0,0,0,0.7);
}
.eSlot.selected{
  outline: 2px solid rgba(217,179,90,0.80);
  box-shadow:
    0 0 0 2px rgba(217,179,90,0.12),
    0 12px 22px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,255,255,0.06);
}
.eSlot .label{
  color: rgba(217,179,90,0.75);
}
.eSlot .item{
  color: var(--d-text);
}

/* 가방 아이템 칸 */
.bItem{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.05), rgba(0,0,0,0.0) 50%),
    linear-gradient(180deg, #121212, #070707);
  border: 1px solid rgba(176,139,58,0.12);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -10px 16px rgba(0,0,0,0.75);
}
.bItem:hover{
  border-color: rgba(217,179,90,0.35);
}
.bItem.selected{
  outline: 2px solid rgba(110,241,120,0.70);
}

/* 아이콘 캔버스도 더 “철” 느낌 */
.iconCanvas{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.10), rgba(0,0,0,0.0) 40%),
    linear-gradient(180deg, #0f0f0f, #050505);
  border-radius: 10px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -10px 14px rgba(0,0,0,0.7);
}

/* ============================= */
/* 아이템 정보창(글/라인)         */
/* ============================= */
.itemInfoWrap{
  color: var(--d-text);
}
.itemInfoLine{
  color: rgba(231,226,216,0.92);
}
.itemInfoDim{
  color: rgba(185,178,166,0.85);
}
.itemInfoTier{
  opacity: 0.78;
  font-size: 12px;
  margin-left: 6px;
  color: rgba(217,179,90,0.75);
}

/* 드롭 선택 패널(lootOverlay)도 톤 통일 */
#lootPanel{
  background:
    radial-gradient(800px 340px at 50% 0%, rgba(255,255,255,0.05), rgba(0,0,0,0.0) 55%),
    linear-gradient(180deg, #0f0f0f, #070707 70%, #040404);
  border: 1px solid rgba(176,139,58,0.22);
  box-shadow: 0 26px 70px rgba(0,0,0,0.8);
}
.lootCard{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.05), rgba(0,0,0,0.0) 55%),
    linear-gradient(180deg, #141414, #080808);
  border-color: rgba(176,139,58,0.16);
}
.lootCard button{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.0) 35%),
    linear-gradient(180deg, #1b3f9b, #10285f);
  border: 1px solid rgba(217,179,90,0.18);
  box-shadow:
    0 12px 18px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -10px 16px rgba(0,0,0,0.75);
}
/* =========================================================
   ✅ DIABLO II STYLE UI OVERRIDES (Dark / Heavy / Stone+Metal)
   - 기존 CSS 아래에 "그대로 추가"하면 덮어씌워짐
   ========================================================= */

:root{
  /* 전체 톤 */
  --d2-bg: #070707;
  --d2-panel: #0c0c0c;
  --d2-panel2:#101010;
  --d2-stone:#141312;
  --d2-stone2:#1a1817;

  /* 테두리 / 음영 */
  --d2-edge1: rgba(255,255,255,0.06);
  --d2-edge2: rgba(0,0,0,0.85);
  --d2-inset: rgba(0,0,0,0.65);

  /* 포인트(디아2 붉은 느낌) */
  --d2-red1:#5a0b0b;
  --d2-red2:#b11b1b;
  --d2-redGlow: rgba(255,40,40,0.22);

  /* 금속/황동 하이라이트 */
  --d2-brass1:#c9a86a;
  --d2-brass2:#7a5a2b;

  /* 텍스트 */
  --d2-txt:#e6e1d8;
  --d2-dim:#b9b0a3;
  --d2-dimmer:#877f75;
}

/* ===== 배경 기본 ===== */
body{
  background: radial-gradient(ellipse at top, #0b0b0b 0%, #040404 55%, #000 100%);
  color: var(--d2-txt);
}

/* =========================================================
   ✅ 하단 UI 바 (디아2 석재+금속 프레임)
   ========================================================= */
#ui{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.05), rgba(0,0,0,0.3)),
    radial-gradient(120% 140% at 50% -40%, rgba(255,60,60,0.12), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #0e0e0e, #070707 55%, #050505);
  border-top: 2px solid rgba(255,255,255,0.06);
  box-shadow:
    0 -10px 25px rgba(0,0,0,0.65),
    0 -2px 0 rgba(0,0,0,0.9) inset,
    0  2px 0 rgba(255,255,255,0.03) inset;
}

/* 하단 바 상단에 얇은 붉은 룬 라인 */
#ui::before{
  content:"";
  position:absolute;
  left:0; right:0; top:-2px;
  height:2px;
  background: linear-gradient(90deg,
    rgba(0,0,0,0),
    rgba(255,40,40,0.35),
    rgba(0,0,0,0)
  );
  pointer-events:none;
}

/* =========================================================
   ✅ 이동 패드 (석재 링 + 눌림)
   ========================================================= */
#movePad{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0) 55%),
    radial-gradient(circle at 50% 60%, #1a1817 0%, #0e0d0d 60%, #080808 100%);
  border: 1px solid rgba(255,255,255,0.07);
  box-shadow:
    0 10px 20px rgba(0,0,0,0.55),
    0 2px 0 rgba(255,255,255,0.03) inset,
    0 -8px 14px rgba(0,0,0,0.75) inset;
}

#stick{
  background:
    radial-gradient(circle at 35% 35%, rgba(255,255,255,0.12), rgba(0,0,0,0) 60%),
    radial-gradient(circle at 50% 60%, #707070 0%, #3a3a3a 55%, #1d1d1d 100%);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 8px 14px rgba(0,0,0,0.55),
    0 2px 0 rgba(255,255,255,0.08) inset,
    0 -10px 12px rgba(0,0,0,0.6) inset;
}

/* =========================================================
   ✅ 공격 버튼 (디아2: 둥근 석재+붉은 코어)
   ========================================================= */
#attackBtn{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.09), rgba(0,0,0,0) 55%),
    radial-gradient(circle at 50% 60%, #2b0909 0%, #1a0707 48%, #0a0505 100%);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 14px 24px rgba(0,0,0,0.65),
    0  2px 0 rgba(255,255,255,0.06) inset,
    0 -12px 18px rgba(0,0,0,0.75) inset,
    0 0 18px rgba(255,40,40,0.12);
}

#attackBtn::after{
  content:"";
  position:absolute;
  inset:10%;
  border-radius:50%;
  border: 1px solid rgba(255,60,60,0.28);
  box-shadow: 0 0 22px rgba(255,40,40,0.12) inset;
  pointer-events:none;
}

#attackBtn.active{
  transform: scale(0.90);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.7),
    0 2px 0 rgba(255,255,255,0.05) inset,
    0 -16px 24px rgba(0,0,0,0.85) inset,
    0 0 26px rgba(255,40,40,0.22);
}

/* =========================================================
   ✅ 상단 HUD 버튼 (무거운 금속 버튼)
   ========================================================= */
#hudBtns .hudBtn{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.07), rgba(0,0,0,0.25)),
    radial-gradient(circle at 40% 35%, #1f1d1c 0%, #0f0f0f 60%, #070707 100%);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    0 2px 0 rgba(255,255,255,0.05) inset,
    0 -10px 14px rgba(0,0,0,0.75) inset;
  color: #f3eee4;
}

#hudBtns .hudBtn:active{
  transform: scale(0.95);
}

/* =========================================================
   ✅ 공통 오버레이 / 패널 (디아2 창 느낌)
   ========================================================= */
.panelOverlay{
  background: rgba(0,0,0,0.68);
  backdrop-filter: blur(2px);
}

.panel{
  background:
    radial-gradient(120% 140% at 50% 0%, rgba(255,60,60,0.10), rgba(0,0,0,0) 55%),
    linear-gradient(180deg, #141312, #0b0b0b 55%, #070707);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow:
    0 24px 60px rgba(0,0,0,0.75),
    0 2px 0 rgba(255,255,255,0.04) inset,
    0 -18px 26px rgba(0,0,0,0.85) inset;
  position: relative;
}

/* 패널 상단 금속 프레임 */
.panel::before{
  content:"";
  position:absolute;
  left:10px; right:10px; top:10px;
  height:10px;
  border-radius:10px;
  background: linear-gradient(90deg,
    rgba(0,0,0,0),
    rgba(201,168,106,0.18),
    rgba(0,0,0,0)
  );
  pointer-events:none;
}

/* 패널 닫기/탭 버튼 */
.panelClose{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.25)),
    linear-gradient(180deg, #1a1817, #0f0f0f);
  border: 1px solid rgba(255,255,255,0.10);
  color: var(--d2-txt);
  box-shadow:
    0 10px 16px rgba(0,0,0,0.45),
    0 2px 0 rgba(255,255,255,0.05) inset,
    0 -10px 14px rgba(0,0,0,0.75) inset;
}

.panelClose:hover{
  border-color: rgba(201,168,106,0.35);
  box-shadow:
    0 10px 16px rgba(0,0,0,0.45),
    0 0 14px rgba(201,168,106,0.12);
}

/* =========================================================
   ✅ 장비 슬롯 / 스펙 박스 (돌+금속 느낌)
   ========================================================= */
#equipSlots, #specBox, #bagInfo, #bagGrid, #chaosLeft, #chaosInfo{
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,0.05), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #101010, #090909 65%, #070707);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow:
    0 2px 0 rgba(255,255,255,0.03) inset,
    0 -12px 18px rgba(0,0,0,0.7) inset;
}

.eSlot{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.05), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #161413, #0e0d0d);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 8px 14px rgba(0,0,0,0.45),
    0 2px 0 rgba(255,255,255,0.04) inset,
    0 -10px 14px rgba(0,0,0,0.75) inset;
}

.eSlot:hover{ border-color: rgba(201,168,106,0.35); }
.eSlot.selected{ outline: 2px solid rgba(201,168,106,0.65); }

.eSlot .label{
  color: var(--d2-dimmer);
}
.eSlot .item{
  color: var(--d2-txt);
}

/* 스펙 텍스트 박스 */
#specText, #equipInfo{
  background:
    linear-gradient(180deg, #0e0e0e, #070707);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow:
    0 2px 0 rgba(255,255,255,0.03) inset,
    0 -12px 18px rgba(0,0,0,0.75) inset;
  color: var(--d2-txt);
}

/* =========================================================
   ✅ 인벤 칸 (디아2 인벤 느낌: 더 눌린 칸 + 금속 테두리)
   ========================================================= */
.bItem{
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,0.05), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #151313, #0d0c0c);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 2px 0 rgba(255,255,255,0.03) inset,
    0 -10px 14px rgba(0,0,0,0.8) inset;
}
.bItem:hover{ border-color: rgba(201,168,106,0.28); }
.bItem.selected{ outline: 2px solid rgba(255,70,70,0.45); }
.bItem.unique{ border-color: rgba(201,168,106,0.65); box-shadow: 0 0 14px rgba(201,168,106,0.10); }

.iconCanvas{
  background: rgba(255,255,255,0.04) !important;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.45) inset;
}

/* =========================================================
   ✅ 아이템 선택(loot) 오버레이: 어두운 성소 UI
   ========================================================= */
#lootOverlay{
  background: rgba(0,0,0,0.78);
}

#lootPanel{
  background:
    radial-gradient(120% 140% at 50% 0%, rgba(255,60,60,0.12), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #141312, #0b0b0b 55%, #070707);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 26px 70px rgba(0,0,0,0.78),
    0 2px 0 rgba(255,255,255,0.04) inset,
    0 -20px 30px rgba(0,0,0,0.88) inset;
}

#lootTitle{
  color: #f3eee4;
  text-shadow: 0 2px 0 rgba(0,0,0,0.6);
  letter-spacing: 0.02em;
}

.lootCard{
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,0.05), rgba(0,0,0,0) 60%),
    linear-gradient(180deg, #171514, #0e0d0d);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    0 2px 0 rgba(255,255,255,0.03) inset,
    0 -12px 18px rgba(0,0,0,0.82) inset;
}

.lootCard button{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.2)),
    linear-gradient(180deg, #2a1010, #160909);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    0 10px 18px rgba(0,0,0,0.55),
    0 0 18px rgba(255,40,40,0.10);
}
.lootCard button:active{ transform: scale(0.98); }

/* 희귀도 강조 */
.lootCard.normal{ border-color: rgba(255,255,255,0.10); }
.lootCard.magic{   border-color: rgba(47,123,255,0.55); box-shadow: 0 0 18px rgba(0,140,255,0.22); }
.lootCard.rare{   border-color: rgba(201,168,106,0.70); box-shadow: 0 0 22px rgba(201,168,106,0.22); animation: none; }

/* =========================================================
   ✅ 텍스트/희귀도 컬러(POE 색 유지하되 디아톤으로 살짝)
   ========================================================= */
.r-normal{ color:#f0ece4; }
.r-magic{ color:#7fb2ff; }
.r-rare{ color:#ffd166; }
.r-unique{ color:#ffb86b; }

.itemInfoDim{ color: var(--d2-dimmer); }
.itemInfoLine{ color: var(--d2-txt); }

/* 모바일에서 너무 번쩍이지 않게 */
@media (max-width:600px){
  #ui{ box-shadow: 0 -8px 20px rgba(0,0,0,0.65), 0 -14px 18px rgba(0,0,0,0.65) inset; }
}
  
/* ===== 스펙창 장착 슬롯 (작게 4개 일렬) ===== */
#equipSlots{
  display:grid;
  grid-template-columns:repeat(4, 1fr);
  gap:10px;
  margin: 8px 0 12px 0;
}
.eSlotSmall{
  position:relative;
  aspect-ratio:1/1;
  border-radius: 12px;
  background:rgba(0,0,0,0.35);
  border:2px solid rgba(255,255,255,0.12);
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.06);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  user-select:none;
}
.eSlotSmall.selected{
  border-color: rgba(200,160,90,0.9);
  box-shadow: 0 0 0 3px rgba(200,160,90,0.35), inset 0 0 0 2px rgba(255,255,255,0.06);
}
.eSlotSmall .slotLabel{ display:none !important; }
.eSlotSmall /* icon canvases only (avoid shrinking #game) */
#ui-root canvas{
  width:44px;
  height:44px;
  image-rendering:pixelated;
}

#game{
  position:fixed;
  top:0;
  left:0;
  width:100vw;
  height:100vh;
  image-rendering:pixelated;
}

.itemInfoBox{
  background:rgba(0,0,0,0.35);
  border:2px solid rgba(255,255,255,0.12);
  border-radius:22px;
  padding:18px 18px;
  margin: 0 0 12px 0;
}



    /* ===== FIX (index13): 슬롯 글씨 제거 + 캐릭터 스탯 박스 정렬 ===== */
    .eSlotSmall .slotLabel{ display:none !important; }

    /* specBox는 컨테이너(투명)로만 쓰고, 실제 박스는 #equipInfo/#specText가 담당 */
    #specBox{
      background:transparent !important;
      border:none !important;
      padding:0 !important;
      border-radius:0 !important;
      gap:6px !important; /* 장비상세 ↔ 캐릭터스탯 간격 줄이기 */
    }
    #equipInfo, #specText{
      width:100% !important;
      box-sizing:border-box !important;
    }
/* =======================
   CRAFTING PANEL FIX
======================= */

#craftingPanel{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.92);
  z-index:999999;
  display:none;
  flex-direction:column;
  color:#fff;
}

#craftingPanel.active{
  display:flex;
}

#craftTop{
  display:flex;
  justify-content:space-between;
  padding:20px;
}

#craftItemIcon{
  width:90px;
  height:90px;
  border:2px solid #999;
  border-radius:10px;
}

#craftOptions{
  flex:1;
  margin-left:20px;
  max-height:120px;
  overflow-y:auto;
}

#craftDesc{
  padding:15px;
  border-top:1px solid #333;
  border-bottom:1px solid #333;
  font-size:14px;
}

#craftOrbs{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  padding:15px;
}

.craftOrb{
  background:#222;
  border:1px solid #444;
  border-radius:8px;
  padding:10px;
  text-align:center;
  cursor:pointer;
}

.craftOrb:hover{
  border-color:gold;
}

/* ===== 메타 크래프팅 표시 (하늘색) ===== */
.itemInfoMeta{
  color:#7fd3ff;
  font-weight:900;
  text-shadow:0 0 6px rgba(127,211,255,0.35);
}


/* ===== Craft 패널: 아이템 아이콘 제거 + 공간 압축 ===== */
#craftItemIcon{ display:none !important; }
#craftTopRow{
  grid-template-columns: 1fr !important;
  gap: 8px !important;
}
#craftItemText{
  min-height: 0 !important;
}
/* 구분선 간격 줄이기 */
.panelHr{ margin: 8px 0 !important; }
/* 오브 설명/카운트 영역 간격 줄이기 */
#orbDesc{ margin-top: 6px !important; }
#orbCounts{ margin-top: 6px !important; }


/* ===== Gold buttons (제작/장착/해제) ===== */
.goldBtn{
  color:#ffd166 !important;
  text-shadow: 0 0 8px rgba(255,209,102,0.20);
  border-color: rgba(255,209,102,0.28) !important;
}


/* ===== Craft Orbs (아이템 아이콘 스타일) ===== */
#orbCounts{ display:none !important; }

#craftOrbGrid{
  display:grid !important;
  grid-template-columns: repeat(5, minmax(0, 1fr)) !important;
  gap:10px !important;
}

/* 장비 슬롯(.eSlotSmall) 느낌으로 오브 버튼 통일 */
#craftOrbGrid .orbBtn{
  position:relative;
  aspect-ratio:1/1;
  border-radius: 12px !important;
  background: rgba(0,0,0,0.35) !important;
  border: 2px solid rgba(255,255,255,0.12) !important;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.06) !important;
  overflow:hidden;
  user-select:none;
  padding:0 !important;

  display:flex;
  align-items:center;
  justify-content:center;

  /* 글씨 숨김 */
  font-size:0 !important;
  line-height:0 !important;
}

/* 선택(active) - 금빛/푸른빛 테두리 */
#craftOrbGrid .orbBtn.active{
  border-color: rgba(255,209,102,0.55) !important;
  box-shadow:
    0 0 0 2px rgba(255,209,102,0.35),
    0 0 18px rgba(80,170,255,0.18),
    inset 0 0 0 2px rgba(255,255,255,0.06) !important;
}

/* 오브 캔버스 */
#craftOrbGrid .orbBtn canvas.orbIcon{
  width:100%;
  height:100%;
  image-rendering:auto;
}

/* 수량 (아이템 숫자 느낌) */
#craftOrbGrid .orbBtn .orbMiniCount{
  position:absolute;
  bottom:6px;
  left:0; right:0;
  text-align:center;
  font-size:14px !important;
  line-height:1 !important;
  font-weight:900;
  color:#ffd166;
  text-shadow:0 0 8px rgba(255,209,102,0.18);
  pointer-events:none;
}


/* ===== iOS Safe Area + Orb Touch Fix ===== */
:root{ --sat: env(safe-area-inset-top); }
#craftOverlay .panel, #equipOverlay .panel, #bagOverlay .panel{
  margin-top: calc(var(--sat) + 12px) !important;
}

/* 오브 버튼 터치 안정화 */
#craftOrbGrid .orbBtn{
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}
#craftOrbGrid .orbBtn canvas.orbIcon{ pointer-events:none !important; }


/* ===== Panel top alignment (safe-area 딱 맞춤) ===== */
:root{ --sat: env(safe-area-inset-top); }
#craftOverlay .panel, #equipOverlay .panel, #bagOverlay .panel{
  margin-top: var(--sat) !important;
}


#craftOverlay{
position:fixed; inset:0; display:none;
  align-items:flex-start; justify-content:center;
  padding-top:calc(var(--safeTop, 0px) + 10px);
  padding-bottom:calc(var(--uiH, 0px) + var(--safeBottom, 0px) + 10px);
  z-index:99999; background:rgba(0,0,0,0.35);
}


/* hide old emoji HUD buttons safely */
#hudBtns{ display:flex; }


/* ===== Loot Button (above U) ===== */
#lootBtn{
position:fixed;
  right:8px;
  bottom:calc(var(--uiH, 0px) + 14px);
  width:46px;height:46px;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:radial-gradient(circle at 30% 25%, rgba(255,255,255,.14), rgba(0,0,0,.06) 35%, rgba(0,0,0,.62) 100%);
  border:2px solid rgba(202,166,85,.55);
  box-shadow:0 10px 22px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.06);
  color:#e6d3a3;
  font-size:28px;
  user-select:none;
  -webkit-tap-highlight-color:transparent;
}
#lootBtn .lootEmoji{font-size:28px;line-height:1;}
#lootBtn img{width:30px;height:30px;display:block;}

#lootBtn:active{ transform: scale(0.96); }
.gauntlet{ width:44px; height:44px; }


/* lootBtnSizeOverrideV1 */
#lootBtn{ width:56px !important; height:56px !important; border-radius:16px !important; }
.gauntlet{ width:42px !important; height:42px !important; }

/* lootBtnOverrideV25 */
#lootBtn{
  width:52px !important;
  height:52px !important;
  border-radius:16px !important;
  pointer-events:auto !important;
}
.gauntlet{ width:40px !important; height:40px !important; }

/* lootBtnOverrideV26 - circle final */
#lootBtn{
  width:54px !important;
  height:54px !important;
  border-radius:50% !important;
  z-index:99999 !important;
}


/* ===== Loot Button polish (V29): circular gloss (no square) + press anim ===== */
#lootBtn{
  position:fixed !important;
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  width:54px !important;
  height:54px !important;
  border-radius:50% !important;
  overflow:hidden !important;              /* ✅ 원형 마스크 */
  -webkit-mask-image: -webkit-radial-gradient(white, black); /* iOS 라운드 클리핑 안정화 */

  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.18), rgba(255,255,255,0.04) 42%, rgba(0,0,0,0.62) 78%),
    linear-gradient(145deg,#1f2834,#0f141c) !important;

  box-shadow:
    inset 0 2px 4px rgba(255,255,255,0.12),
    inset 0 -4px 8px rgba(0,0,0,0.62),
    0 14px 20px rgba(0,0,0,0.40) !important;

  transition: transform 90ms ease, filter 90ms ease !important;
  will-change: transform;
}

/* press feedback */
#lootBtn:active{
  transform: scale(0.92) !important;
  filter: brightness(1.05) !important;
}

/* ✅ 광택: pseudo-element를 버튼 크기에 딱 맞추고, border-radius도 같이 */
#lootBtn::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  pointer-events:none;

  background:
    radial-gradient(circle at 30% 28%,
      rgba(255,255,255,0.28) 0%,
      rgba(255,255,255,0.12) 26%,
      rgba(255,255,255,0.00) 55%);

  opacity:0.9;
}

/* 아이콘 중앙 */
#lootBtn .gauntlet{
  width:40px !important;
  height:40px !important;
  display:block !important;
}


/* ===== FINAL: Loot button unified with Attack button (no floating) ===== */
#ui{ overflow:visible !important; }
#rightBtns{ overflow:visible !important; }

#rightBtns #lootBtn{
  position:absolute !important;
  right:0 !important;
  bottom: calc(var(--btn) + 10px) !important; /* attack(U) 위 */
  width: var(--btn) !important;
  height: var(--btn) !important;
  border-radius:50% !important;
  background:#111 !important;
  border:3px solid #444 !important;
  box-shadow: 0 10px 24px rgba(0,0,0,0.45) !important;
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  z-index: 3 !important;
  padding:0 !important;
  margin:0 !important;
  pointer-events:auto !important;
  touch-action: manipulation;
}
#rightBtns #lootBtn:active{ transform: scale(0.92) !important; }
#rightBtns #lootBtn .gauntlet{
  width: 62% !important;
  height: 62% !important;
  display:block !important;
  pointer-events:none !important;
}


/* HUD EMOJI BUTTONS */
#btnEquip{ display:none !important; }
#hudBtns{
  position:fixed;
  top: 56px;
  left: 12px;
  display:flex;
  gap:10px;
  z-index: 9999;
  pointer-events:auto;
}
.hudBtn{
  width:52px;height:52px;
  border-radius:14px;
  background: rgba(20,22,30,.75);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 8px 20px rgba(0,0,0,.45);
  display:flex;align-items:center;justify-content:center;
  font-size:28px;
}


/* LOOT BUTTON (EMOJI) */
#lootBtn{
  position:fixed;
  right: 18px;
  bottom: 240px; /* sits above bottom UI */
  width:72px;height:72px;
  border-radius:50%;
  background: rgba(16,18,22,.78);
  border: 2px solid rgba(255,255,255,.14);
  box-shadow: 0 14px 32px rgba(0,0,0,.55), inset 0 0 0 2px rgba(0,0,0,.35);
  display:flex;align-items:center;justify-content:center;
  z-index: 9999;
  pointer-events:auto;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  font-size:34px;
}
#lootBtn:active{ transform: scale(0.96); }


/* Hide HUD buttons during GAME OVER reliably */
body.gameover #miniBagBtn,
body.gameover #lootBtn,
body.gameover #hudBtns{ display:none !important; }


/* === overlay alignment + internal scrolling === */
#craftOverlay, #equipOverlay, #bagOverlay{
position:fixed; inset:0; display:none;
  align-items:flex-start; justify-content:center;
  padding-top:calc(var(--safeTop, 0px) + 10px);
  padding-bottom:calc(var(--uiH, 0px) + var(--safeBottom, 0px) + 10px);
  z-index:99999; background:rgba(0,0,0,0.35);
}
#craftBody{ flex:1; min-height:0; overflow-y:auto; padding-right:2px; }
#equipPanelBody{ flex:1; min-height:0; overflow-y:auto; }
#bagBody{ flex:1; min-height:0; overflow-y:auto; }


/* hide HUD buttons while any panel is open */
body.panel-open #hudBtns,
body.panel-open #lootBtn{ display:none !important; }

/* ==== extracted style block 1 ==== */
/* ==== POE RESKIN SAFE OVERRIDE (separate style tag; no DOM/JS changes) ==== */
:root{
  --poe-gold: #b08a3a;
  --poe-gold2:#d6b25a;
  --poe-bg:   #0b0b0b;
  --poe-bg2:  #121212;
  --poe-line: rgba(176,138,58,.55);
}

/* Keep layout, just remove the big HUD bar look */
#ui{
  background: transparent !important;
  border-top: none !important;
  box-shadow: none !important;
}
#ui::before, #ui::after{ content:none !important; }

/* Common circular button look (NO emojis added/removed) */
#attackBtn,
#ultimateBtn,
#lootBtn,
#miniBagBtn,
#btnBag,
#btnEquip{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.08), rgba(0,0,0,0)),
    var(--poe-bg) !important;
  border: 3px solid var(--poe-gold) !important;
  box-shadow:
    inset 0 0 10px rgba(0,0,0,.85),
    0 10px 18px rgba(0,0,0,.45) !important;
  color: var(--poe-gold2) !important;
  border-radius: 50% !important;
}

#movePad{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,.06), rgba(0,0,0,0)),
    var(--poe-bg2) !important;
  border: 3px solid var(--poe-gold) !important;
  box-shadow: inset 0 0 14px rgba(0,0,0,.85) !important;
}
#stick{
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,.20), rgba(0,0,0,0)),
    var(--poe-gold) !important;
  box-shadow: inset 0 0 10px rgba(0,0,0,.45) !important;
  border-radius: 50% !important;
}

/* Panels: remove gradients, match POE */
#craftOverlay .panel,
#bagOverlay .panel,
#equipOverlay .panel,
#statOverlay .panel,
#statsOverlay .panel,
.panel{
  background: #111 !important;
  border: 4px solid var(--poe-gold) !important;
  box-shadow: 0 12px 28px rgba(0,0,0,.55) !important;
}
.panelHeader, .panelTop, .panelTitle, .overlayHeader{
  color: var(--poe-gold2) !important;
  background: transparent !important;
  border-bottom: 1px solid var(--poe-line) !important;
}

/* Gold buttons (craft/equip/unequip/use) */
button.gold, .goldBtn, .btnGold, #craftBtn, #equipBtn, #unequipBtn, #useOrbBtn{
  background: #121212 !important;
  border: 2px solid var(--poe-gold) !important;
  color: var(--poe-gold2) !important;
  box-shadow: inset 0 0 10px rgba(0,0,0,.7) !important;
}

/* Prevent iOS tap highlight */
*{-webkit-tap-highlight-color: rgba(0,0,0,0);}

/* ==== extracted style block 2 ==== */
/* ===== FULLSCREEN PANEL MODE ===== */

/* When overlay is visible, hide joystick + bottom buttons */
.overlayActive #movePad,
.overlayActive #attackBtn,
.overlayActive #ultimateBtn,
.overlayActive #lootBtn,
.overlayActive #miniBagBtn,
.overlayActive #btnBag,
.overlayActive #btnEquip {
  display: none !important;
}

/* Force overlays to use full screen */
#craftOverlay,
#bagOverlay,
#equipOverlay,
#statOverlay,
#statsOverlay {
  top: 0 !important;
  bottom: 0 !important;
  height: 100vh !important;
  max-height: 100vh !important;
  padding-bottom: 20px !important;
}

/* Make panel inside stretch fully */
#craftOverlay .panel,
#bagOverlay .panel,
#equipOverlay .panel,
#statOverlay .panel,
#statsOverlay .panel {
  height: 100% !important;
  max-height: 100% !important;
}


#game{position:fixed;left:0;top:0;}

#ui-root{position:fixed; inset:0; z-index:10; pointer-events:none;}

#ui-root #ui,
#ui-root button,
#ui-root .panel,
#ui-root #equipOverlay,
#ui-root #bagOverlay,
#ui-root #craftOverlay,
#ui-root #lootOverlay{pointer-events:auto;}
